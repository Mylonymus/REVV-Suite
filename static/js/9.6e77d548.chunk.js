(this["webpackJsonprevv-suite"]=this["webpackJsonprevv-suite"]||[]).push([[9],{1362:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Pe}));var r=a(1318),i=a(56),n=a.n(i),s=a(84),o=a(39),c=a(40),l=a(41),d=a(42),u=a(639),f=a(0),j=a.n(f),b=a(640),h=a.n(b),p=a(146),v=a(85),O=a.n(v).a.create({baseURL:"https://us-east-1.aws.webhooks.mongodb-realm.com/api/client/v2.0/app/revv-suite-qdwss/service/revv-data/incoming_webhook/"}),g=a(530),m=a(900),x=a(658),V=a(337),R=a(339),P=a(1345),w=a(1350),E=a(336),S=a(319),k=a(322),T=a(662),z=a(648),D=a(644),F=a(661),C=a(649),y=a(317),A=a(133),_=a(901),W=a.n(_),L=a(669),I=a.n(L),N=a(681),U=a.n(N),$=a(670),J=a.n($),B=a(679),M=a.n(B),H=a(673),G=a.n(H),Q=a(671),Z=a.n(Q),q=a(672),K=a.n(q),Y=a(674),X=a.n(Y),ee=a(676),te=a.n(ee),ae=a(677),re=a.n(ae),ie=a(678),ne=a.n(ie),se=a(682),oe=a.n(se),ce=a(675),le=a.n(ce),de=a(680),ue=a.n(de),fe=a(683),je=a.n(fe),be=a(2),he=["children","onClose"],pe={Add:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(I.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Check:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(J.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Clear:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(Z.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Delete:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(K.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),DetailPanel:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(G.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Edit:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(X.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Export:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(le.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Filter:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(te.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),FirstPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(re.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),LastPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ne.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),NextPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(G.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),PreviousPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(M.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ResetSearch:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(Z.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Search:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ue.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),SortArrow:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(U.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(oe.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ViewColumn:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(je.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))}))};function ve(e,t,a){var r=e.filter((function(e){return e[t]===a}));if(r.length>0)return r[0]}function Oe(e,t,a,r,i){var n=Object(be.jsx)("div",{}),s="$";r.toUpperCase().includes("REVV")&&(s="REVV");var o=r.replace(/\D/g,"");if(e&&e.total>0){var c=e.total,l=e.hired,d=e.owner/c,u=l/c,f=!1;i||(d=.5,u=.5,f=!0);var j=!1;for(var b in t){t[b].unit=s;var h=1;if(t[b].prize<1||f){if(b<t.length-1){var p=parseInt(b)+1;t[p].rank-t[b].rank>1&&(j=!0,t[b].rankString=t[b].rank.toString()+" - "+(t[p].rank-1).toString(),h=parseInt(t[p].rank)-parseInt(t[b].rank))}else j&&(t[b].rankString=t[b].rank.toString()+"+*",h=3e3);t[b].rankString||(t[b].rankString=t[b].rank.toString());var v=t[b].prize*(f?1:o);t[b].hiredPrize=((f?1:u)*v/h).toFixed(2),t[b].ownerPrize=((f?1:d)*v/h).toFixed(2)}}n=Object(be.jsxs)(T.a,{children:[Object(be.jsx)(F.a,{children:Object(be.jsxs)(C.a,{children:[Object(be.jsx)(D.a,{children:"Rank"}),Object(be.jsxs)(D.a,{children:["Driver Prize ",a&&"("+(100*d).toFixed(2)+"%)"]}),a&&Object(be.jsxs)(D.a,{children:["Hired Prize (",(100*u).toFixed(2),"%)"]})]})}),Object(be.jsx)(z.a,{children:t.map((function(e){return Object(be.jsxs)(C.a,{children:[Object(be.jsx)(D.a,{children:e.rankString?e.rankString:e.rank}),Object(be.jsxs)(D.a,{children:[a?e.ownerPrize:e.prize," ",s]}),a&&Object(be.jsxs)(D.a,{children:[e.hiredPrize," ",s]})]})}))})]})}else n=Object(be.jsx)(V.a,{sx:{minWidth:275},children:Object(be.jsx)(R.a,{align:"center",children:Object(be.jsx)("h1",{children:"Prize Data Not Available"})})});return n}var ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).getPrizeData=Object(s.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.eventData.id.toUpperCase(),e.next=3,O.get("prizes",{params:{sessionID:a}}).then((function(e){t=e.data[0],r.setPrizeData(t)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)}))),r.state={prizeTable:Object(be.jsx)(k.a,{}),prizeData:void 0},r}return Object(c.a)(a,[{key:"setPrizeData",value:function(e){this.setState({prizeData:e}),this.generatePrizeTableContent(e,this.props.eventData.data.prize,this.props.eventData.data.splitLeaderboard,this.props.eventData.data.prize_total.toString(),this.props.eventData.data.dynamicPrizePoolRatio)}},{key:"generatePrizeTableContent",value:function(e,t,a,r,i){this.setPrizeTable(Oe(e,t,a,r,i))}},{key:"setPrizeTable",value:function(e){this.setState({prizeTable:e})}},{key:"componentDidMount",value:function(){this.getPrizeData()}},{key:"render",value:function(){return Object(be.jsx)("div",{children:this.state.prizeTable})}}]),a}(f.Component),me=function(e){var t=e.children,a=e.onClose,i=Object(r.a)(e,he);return Object(be.jsxs)(w.a,Object(u.a)(Object(u.a)({sx:{m:0,p:2}},i),{},{children:[t,a?Object(be.jsx)(S.a,{"aria-label":"close",onClick:a,style:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(be.jsx)(W.a,{})}):null]}))};function xe(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(3);return t+":"+(a<10?"0":"")+a}var Ve=[{title:"Series",field:"data.series",hidden:!0},{title:"Name",field:"data.name",filterPlaceholder:"Filter Name"},{title:"Rank",field:"rank",filterPlaceholder:"Filter Rank",hidden:!0},{title:"Time",field:"time",filterPlaceholder:"Filter Time",hidden:!0},{title:"REVV",field:"RewardString",filterPlaceholder:"Filter REVV",hidden:!0},{title:"Tries",field:"tries",filterPlaceholder:"Filter Tries",hidden:!0},{title:"View Pizes",field:"",render:function(e){return new Date(e.endTimestamp).getTime()<(new Date).getTime()?Object(be.jsx)(m.a,{trigger:Object(be.jsx)("a",{children:"View Prizes"}),position:"bottom center",closeOnDocumentClick:!1,modal:!0,closeOnEscape:!0,children:function(t){return Object(be.jsxs)(P.a,{open:!0,onClose:t,children:[Object(be.jsx)(me,{id:"customized-dialog-title",onClose:t,children:"Prize Distribution"}),Object(be.jsx)(ge,{eventData:e})]})}}):Object(be.jsxs)("div",{children:[new Date(e.startTimestamp).getTime()<(new Date).getTime()?"In Progress":"Upcoming","..."]})}},{title:"Start",field:"startTimestamp",type:"date",filterPlaceholder:"Filter Start"},{title:"End",field:"endTimestamp",type:"date",filterPlaceholder:"Filter End"},{title:"Track",field:"data.track",filterPlaceholder:"Filter Track"},{title:"Laps",field:"data.lapCount",filterPlaceholder:"Filter Laps"},{title:"Weather",field:"data.weather",filterPlaceholder:"Filter Weather"},{title:"Total Prize",field:"data.prize_total_formatted",filterPlaceholder:"Filter Prize"},{title:"id",field:"id",hidden:!0},{title:"percentagePrizePool",field:"data.percentagePrizePool",hidden:!0},{title:"dynamicPrizePoolRatio",field:"data.dynamicPrizePoolRatio",hidden:!0},{title:"splitLeaderboard",field:"data.splitLeaderboard",hidden:!0}];function Re(e){return e.map((function(e){return e.startTimestamp=new Date(parseFloat(e.startTimestamp)),e.endTimestamp=new Date(parseFloat(e.endTimestamp)),e.data.prize_total.toString().toUpperCase().includes("REVV")?e.data.prize_total_formatted=e.data.prize_total:e.data.prize_total_formatted=e.data.prize_total.toString()+" $",e})),(e=e.filter((function(e){return!e.data.practice}))).sort((function(e,t){return new Date(t.startTimestamp)-new Date(e.startTimestamp)})),e}var Pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).BasicTable=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("events").then((function(e){t=Re(t=e.data),r.setEventData(t),r.setEventDataLoaded(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),r.getREVVPrice=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("price?ids=revv&vs_currencies=usd").then((function(e){r.setREVVPrice(e.data.revv.usd)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setWalletPosition=function(){var e=Object(s.a)(n.a.mark((function e(t,a){var i,s,o,c,l,d,u,f,j;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({walletPositions:t}),(i=(i=JSON.parse(JSON.stringify(r.state.columns))).filter((function(e){return""!==e.field})))[2].hidden=!1,i[3].hidden=!1,i[4].hidden=!1,i[5].hidden=!1,r.setState({columns:i}),r.getREVVPrice(),s=0,o=0,c=0,l=0,d=0,u=0,f=JSON.parse(JSON.stringify(r.state.eventData)),e.next=18,O.get("prizes").then((function(e){j=e.data})).catch((function(e){console.error(e)}));case 18:f.forEach((function(e){e.REVVReward=0,e.dollarReward=0,e.rank=0;var r=a.reduce((function(t,a){return t+(new Date(a.timeStamp)>=new Date(e.startTimestamp)&&new Date(a.timeStamp)<=new Date(e.endTimestamp))}),0),i=ve(j,"session_id",e.id.toUpperCase());if(i&&t[e.id]){var n=t[e.id],f=parseInt(n.rank);e.rank=f,e.time=xe(t[e.id].time),Oe(i,e.data.prize,e.data.splitLeaderboard,e.data.prize_total.toString(),e.data.dynamicPrizePoolRatio);for(var b=e.data.prize,h=void 0,p=0;p<b.length;p++){var v=b[p],O=p+1;if(O===b.length){h=v;break}if(f>=parseInt(v.rank)&&f<parseInt(b[O].rank)){h=v;break}}if(e.unit="REVV",h){var g="";g=n.leaderboard_id.includes("SPLIT")?n.hired?h.hiredPrize:h.ownerPrize:h.prize,"REVV"===h.unit?(e.tries=r,u+=parseFloat(r),r>0&&(d+=1),l+=1,e.REVVReward+=parseFloat(g),e.RewardString=e.REVVReward.toString()+" REVV",s+=parseFloat(g),c+=f):(e.unit="$",e.tries=r,e.dollarReward+=parseFloat(g),o+=parseFloat(g),e.RewardString=e.dollarReward.toString()+" $")}}})),c>0&&s>0?r.setAverages(s/l,c/l,u/d):r.setAverages(0,0),r.setTotalPrizes(s,o,u),r.setEventData(f),r.setEventDataLoaded(!0);case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.getWalletPositions=Object(s.a)(n.a.mark((function e(){var t,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setEventDataLoaded(!1),t={},e.next=4,O.get("walletPositions",{params:{walletAddress:r.state.walletAddress.toUpperCase()}});case 4:return a=(a=e.sent).data,r.state.eventData.forEach((function(e){var r="GAME_SESSION_ALPHA_A_";if(e.data.splitLeaderboard){var i=r+e.id.toUpperCase()+"_SPLIT_OWNER",n=r+e.id.toUpperCase()+"_SPLIT_HIRED",s=ve(a,"leaderboard_id",i),o=ve(a,"leaderboard_id",n);s?t[e.id]=s:o&&(o.hired=!0,t[e.id]=o)}else{var c=r+e.id.toUpperCase(),l=ve(a,"leaderboard_id",c);l&&(t[e.id]=l)}})),e.next=9,g.a.get("&address=".concat(r.state.walletAddress)).then((function(e){i=e.data.result,i=r.filterTransactions(i)})).catch((function(e){console.error(e)}));case 9:return e.next=11,r.setWalletPosition(t,i);case 11:case"end":return e.stop()}}),e)}))),r.state={eventData:void 0,eventDataLoaded:!1,walletAddress:"",walletPositions:void 0,columns:Ve,totalREVV:void 0,totalDollars:void 0,totalTries:void 0,REVVPrice:0,averageRank:0,averageREVV:0,averageTries:0},r}return Object(c.a)(a,[{key:"setEventData",value:function(e){this.setState({eventData:e})}},{key:"setEventDataLoaded",value:function(e){this.setState({eventDataLoaded:e})}},{key:"componentDidMount",value:function(){this.BasicTable()}},{key:"setWalletAddress",value:function(e){this.setState({walletAddress:e,walletPositions:void 0,columns:Ve,totalREVV:void 0,totalDollars:void 0,totalTries:void 0,REVVPrice:0,averageRank:0,averageREVV:0,averageTries:0})}},{key:"filterWallet",value:function(e){return e.wallet===this.walletAddress}},{key:"setREVVPrice",value:function(e){this.setState({REVVPrice:e})}},{key:"setTotalPrizes",value:function(e,t,a){this.setState({totalREVV:e,totalDollars:t,totalTries:a})}},{key:"filterTransactions",value:function(e){return e=(e=e.filter((function(e){return"REVV"===e.tokenSymbol&&e.to.toUpperCase()==="0x069895FdA566d0364ABEc6e290BeE3D565c55666".toUpperCase()&&"5000000000000000000"===e.value}))).map((function(e){return e.timeStamp=new Date(1e3*e.timeStamp),e}))}},{key:"setAverages",value:function(e,t,a){this.setState({averageREVV:e,averageRank:t,averageTries:a})}},{key:"render",value:function(){var e=this;return Object(be.jsxs)(E.a,{container:!0,spacing:3,children:[Object(be.jsx)(E.a,{item:!0,md:12,xs:12,children:Object(be.jsx)(y.a,{id:"wallet-address",label:"Wallet Address",variant:"outlined",fullWidth:!0,focused:!0,placeholder:"0x000...",onChange:function(t){return e.setWalletAddress(t.target.value)}})}),Object(be.jsx)(E.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(x.a,{color:"primary",fullWidth:!0,variant:"contained",onClick:function(){return e.getWalletPositions()},children:"Get Wallet List"})}),this.state.totalREVV&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalRevv",label:"Total REVV (New Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalREVV.toFixed(2).toString()+" REVV"+(this.state.REVVPrice?" ("+(this.state.REVVPrice*this.state.totalREVV).toFixed(2).toString()+" $)":"")})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalDollars",label:"Total Dollars (Old Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalDollars.toFixed(2).toString()+" $"})})]}),this.state.averageRank>0&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageRank",label:"Average Rank (New Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageRank.toFixed(0).toString()})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageREVV",label:"Average REVV Earned (New Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageREVV.toFixed(2).toString()+" REVV"+(this.state.REVVPrice?" ("+(this.state.REVVPrice*this.state.averageREVV).toFixed(2).toString()+" $)":"")})})]}),this.state.totalTries&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalTries",label:"Total Tries (New Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalTries.toFixed(0).toString()+" Tries"+(this.state.REVVPrice?" ("+5*this.state.totalTries+" REVV/"+(this.state.REVVPrice*this.state.totalTries*5).toFixed(2).toString()+" $)":"")})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageTries",label:"Average Tries (New Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageTries.toFixed(0).toString()+" Tries"+(this.state.REVVPrice?" ("+(5*this.state.averageTries).toFixed(2)+" REVV/"+(this.state.REVVPrice*this.state.averageTries*5).toFixed(2).toString()+" $)":"")})})]}),Object(be.jsx)(E.a,{item:!0,xs:12,children:Object(be.jsx)(h.a,{theme:Object(A.a)(),style:{width:"100%",display:"grid"},title:"REVV Leaderboards",columns:this.state.columns,data:this.state.eventData,icons:pe,isLoading:!this.state.eventDataLoaded,options:{pageSize:10,pageSizeOptions:[5,10,20,{value:this.state.eventData?parseInt(this.state.eventData.length):100,label:"All"}],filtering:!0,selection:!0,search:!1,toolbar:!0,grouping:!0,exportButton:!0},onSelectionChange:function(t){var a=0,r=0,i=0,n=0,s=0,o=0;0===t.length&&(t=e.state.eventData),t.forEach((function(e){a+=parseFloat(e.REVVReward),r+=parseFloat(e.dollarReward),"REVV"===e.unit&&(i+=parseFloat(e.rank),n+=1,o+=e.tries,e.tries&&e.tries>0&&(s+=1))})),i>0&&a>0?e.setAverages(a/n,i/n,o/s):e.setAverages(0,0),e.setTotalPrizes(a,r,o)}})})]})}}]),a}(f.Component)},530:function(e,t,a){"use strict";var r=a(85),i=a.n(r);t.a=i.a.create({baseURL:"https://api.polygonscan.com/api?module=account&action=tokentx&contractaddress=0x70c006878a5a50ed185ac4c87d837633923de296&sort=desc&apikey=NW6MQ4UW5JIEVBH61JW4AK3WY2Q27ZZIM7"})}}]);
//# sourceMappingURL=9.6e77d548.chunk.js.map